!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=3)}([function(e,t){const i=function(){this.image=new Image,this.image.src="./images/writing.png",this.wall=!1};i.prototype={write:function(){this.wall=!0},draw:function(e){this.wall&&e.drawImage(this.image,180,250,180,150)}};const s=function(){this.image=new Image,this.image.src="./images/shadow.png",this.present=!0};s.prototype={gone:function(){this.present=!1,window.steps.play()},draw:function(e){this.present&&e.drawImage(this.image,200,275,50,175)}};const n=function(){this.image=new Image,this.image.src="./images/bed.png",this.sy=0,this.opened=!1};n.prototype={open:function(){this.sy=1200,this.opened=!0},draw:function(e){e.drawImage(this.image,0,this.sy,1200,1200,-65,300,350,350)}};const o=function(){this.image=new Image,this.image.src="./images/beforetable.png",this.surprised=!1};o.prototype={surprise:function(){this.surprised=!0,window.coinsound.play(),window.skullsound.play()},draw:function(e){this.surprised&&(this.image.src="./images/aftertable.png"),e.drawImage(this.image,570,250,250,250)}};const r=function(){this.image=new Image,this.image.src="./images/title.png",this.phrase=["Press: ","'space' to start and","   to interact","'arrows' to move","'i' for inventory","'m' to toggle music"]};r.prototype={draw:function(e){window.gameEnding||(e.drawImage(this.image,30,0,800,600),e.font='14px "Press Start 2P"',this.phrase.forEach((t,i)=>{let s=30*(i+1)+325;e.fillText(t,390,s)}))}};const h=function(){this.image=new Image,this.image.src="./images/ending.png",this.phrase=["You successfully escape","with recovered memory.","Soon after, you hear her","devilish scream..","Hopefully you will never","encounter her again..","Thanks for playing"]};h.prototype={draw:function(e){e.drawImage(this.image,30,0,800,600),e.font='14px "Press Start 2P"',this.phrase.forEach((t,i)=>{let s=30*(i+1)+325;e.fillText(t,108,s)})}},e.exports={Writing:i,Shadow:s,Bed:n,Table:o,Title:r,Ending:h}},function(e,t){const i=function(){this.image=new Image,this.image.src="./images/key.png",this.found=!1,this.displayw=90,this.displayh=90,this.content=["It's a key.","It fits the trap door perfectly."],this.read=!1};i.prototype={draw:function(e){this.found||e.drawImage(this.image,490,370,60,60)}};const s=function(){this.image=new Image,this.image.src="./images/letter3.png",this.content=["Dear Diary,","When I first saw Tom, I fell in love with him.","It's destined. Tom and me TOGETHER. Although","Tom doesn't know who I am, we will meet soon.","He is not ready for me yet. I really hope he ","likes me.. unlike the other guys.","HOW DARE THEY TO REJECT ME! Doesn't matter.. ","They are all dead and buried under me HAHA","Tom better like me.. or he'll be joining them!"],this.found=!1,this.displayh=85,this.displayw=85,this.read=!1};s.prototype={draw:function(e){this.found||e.drawImage(this.image,90,440,40,40)}};const n=function(){this.image=new Image,this.image.src="./images/letter2.png",this.content=["Dear Diary,","Our eyes met. And he didn't look away from me.","My love. I guess that means he's ready to take ","the vow. I can already imagine us, Tom and I,","standing at the podium. HAHA I cannot continue","for my heart flutters too vigorously!","It's time for us to meet Tom. I will be under","your bed tonight for a special surprise!","Surprise event for our first encounter!"],this.found=!1,this.displayh=85,this.displayw=85,this.read=!1};n.prototype={draw:function(e){this.found||e.drawImage(this.image,660,320,40,40)}};const o=function(){this.image=new Image,this.image.src="./images/letter1.png",this.content=["HOW DARE HE"," ","IF I CAN'T HAVE TOM"," ","NOBODY CAN"," ","I'LL KEEP TOM FOREVER MINE"," ","FIRST I'LL KILL HIM SO HE CAN'T REFUSE!"],this.present=!1,this.found=!1,this.displayh=85,this.displayw=85,this.read=!1};o.prototype={discover:function(){this.present=!0},draw:function(e){this.present&&!this.found&&e.drawImage(this.image,230,375,40,40)}},e.exports={Key:i,Letter1:s,Letter2:n,Letter3:o}},function(e,t){e.exports=class{constructor(e,t){this.ctx=t,this.game=e,this.tom=this.game.addTom()}start(){this.lastTime=0,requestAnimationFrame(this.animate.bind(this))}animate(e){this.game.play(this.ctx),this.lastTime=e,requestAnimationFrame(this.animate.bind(this))}}},function(e,t,i){"use strict";i.r(t);class s{constructor(e){this.image=new Image,this.image.src="./images/right.png",this.width=200,this.height=200,this.sx=0,this.sy=0,this.sh=1200,this.sw=1200,this.blockedr=!1,this.blockedl=!1,this.blockedu=!1,this.blockedd=!1,this.count=0}checkCollision(e){e.x>=12&&e.x<101&&e.y>288&&e.y<292?this.blockedd=!0:this.blockedd=!1,e.x<60&&e.y>240&&e.y<290?this.blockedl=!0:e.x<105&&e.y>290&&e.y<350?this.blockedl=!0:e.x<78&&e.y>=350&&e.y<390?this.blockedl=!0:this.blockedl=!1,e.x>=74&&e.x<101&&355===e.y?this.blockedu=!0:e.x<75&&e.y>390&&e.y<395?this.blockedu=!0:e.x>462&&e.y<289?this.blockedu=!0:this.blockedu=!1,e.x>460&&e.y>=250&&e.y<285?this.blockedr=!0:this.blockedr=!1}draw(e){switch(window.rightPressed&&!window.items?this.image.src="./images/right.png":window.leftPressed&&!window.items&&(this.image.src="./images/left.png"),(!window.upPressed||window.rightPressed||window.items)&&(!window.downPressed||window.leftPressed||window.items)?window.upPressed&&window.rightPressed&&!window.items?window.frames+=150:window.downPressed&&window.leftPressed&&!window.items?window.frames+=150:(window.upPressed||!window.rightPressed||window.items)&&(window.downPressed||!window.leftPressed||window.items)||(window.frames+=150):window.frames+=150,window.frames){case 0:this.sy=0;break;case 1200:this.sy=1200;break;case 2400:this.sy=2400;break;case 3600:this.sy=3600;break;case 4800:this.sy=4800;break;case 6e3:this.sy=6e3;break;case 7200:this.sy=0,window.frames=0,this.count+=1}window.frames>7200&&(this.sy=0,window.frames=0),e.ctx.drawImage(this.image,this.sx,this.sy,this.sw,this.sh,e.x,e.y,this.width,this.height)}}class n{constructor(e){this.image=new Image,this.image.src="./images/door.png",this.width=165,this.height=60,this.X=550,this.Y=450,this.opened=!1}draw(e){e.drawImage(this.image,this.X,this.Y,this.width,this.height)}}class o{constructor(e){this.image=new Image,this.image.src="./images/paint1.png",this.width=100,this.height=120,this.X=480,this.Y=200,this.falling=!1,this.dropped=!1}dropPaint(){this.falling=!0}draw(e){this.falling&&this.Y<340&&(this.Y+=10,window.dropsound.play()),340===this.Y&&(this.falling=!1,this.dropped=!0,this.image.src="./images/paint2.png",this.width=130,this.height=45,this.X=450,this.Y+=45,window.dropsound.pause()),e.drawImage(this.image,this.X,this.Y,this.width,this.height)}}var r=i(0),h=i.n(r);class a{constructor(){this.items=[],this.image=new Image,this.image.src="./images/inventory.png",this.dx=28,this.dy=30,this.full=!1}add(e){this.items.push(e)}draw(e){this.items.length>3&&(this.full=!0),e.drawImage(this.image,this.dx,this.dy,750,120),this.items.forEach((t,i)=>{let s=142*(i+1),n=this.dy+102-t.displayh;e.drawImage(t.image,s,n,t.displayw,t.displayh)})}}var d=i(1),w=i.n(d);class l{constructor(){this.image=new Image,this.image.src="./images/teller.png",this.phrase=["I woke up to a musky odor..","Where.. am I?","Who am I? I must.. find out.."]}draw(e){e.drawImage(this.image,104,330,600,280)}talk({ctx:e,pos:t,interactables:i}){const s=i.inventory;t.x>375&&t.x<460&&t.y>249&&t.y<280&&!i.key.found&&i.paint.dropped?(this.phrase=["There is a key here"],window.keysound.play(),s.add(i.key),i.key.found=!0):t.x>450&&t.x<550&&t.y>300&&t.y<360?i.key.found&&!s.full?this.phrase=["I can't leave yet..","I have to remember who I am.."]:i.key.found?!s.full||i.key.read&&i.letter1.read&&i.letter2.read&&i.letter3.read?s.full&&i.key.read&&i.letter1.read&&i.letter2.read&&i.letter3.read&&(this.phrase=[".. I remember now.. My name","is Tom. This person will kill","me if I don't leave..."],window.gameEnding=!0):this.phrase=["I should probably read the","pieces of diary first..."]:this.phrase=["It's a trap door that leads","to outside. But it's locked."]:t.x>123&&t.x<213&&t.y>240&&t.y<259?i.shadow.present&&i.paint.dropped?this.phrase=["I thought I saw someone..","...","Was this writing always here?"]:i.shadow.present||i.letter3.found||(this.phrase=["There is a part of a diary.","I thought I heard something","around here.. What was it?"],s.add(i.letter3),i.letter3.found=!0):t.x>50&&t.x<108&&t.y>322&&t.y<380&&!i.bed.opened?(window.bedsound.play(),i.bed.open(),this.phrase=["There is something under","the bed sheet.","It's a part of a diary."],s.add(i.letter1),i.letter1.found=!0):t.x>539&&t.x<618&&t.y>285&&t.y<298&&!i.letter2.found&&i.table.surprised&&(window.bedsound.play(),this.phrase=["What happened?","Where is this from?"],i.letter2.found=!0,s.add(i.letter2)),this.draw(e),e.font='16px "Press Start 2P"',this.phrase.forEach((t,i)=>{let s=45*(i+1)+385;e.fillText(t,175,s)})}}class c{constructor(){this.image=new Image,this.image.src="./images/iscreen.png",this.select=new Image,this.select.src="./images/select.png",this.first=!0,this.second=!1,this.third=!1,this.fourth=!1}moveRight(){this.first?(this.first=!1,this.second=!0):this.second?(this.second=!1,this.third=!0):this.third?(this.third=!1,this.fourth=!0):this.fourth&&(this.fourth=!1,this.first=!0)}moveLeft(){this.first?(this.first=!1,this.fourth=!0):this.second?(this.second=!1,this.first=!0):this.third?(this.third=!1,this.second=!0):this.fourth&&(this.fourth=!1,this.third=!0)}drawTab(e){e.drawImage(this.image,20,20,757,720)}drawSelector(e){this.first?e.drawImage(this.select,128,30,120,120):this.second?e.drawImage(this.select,268,30,120,120):this.third?e.drawImage(this.select,408,30,120,120):this.fourth&&e.drawImage(this.select,548,30,120,120)}open({ctx:e,inventory:t}){const i=t.items;let s;this.drawTab(e),this.drawSelector(e),e.font='14px "Press Start 2P"',this.first?i[0]?(i[0].read=!0,s=i[0].content):s=["Nothing here yet."]:this.second?i[1]?(i[1].read=!0,s=i[1].content):s=["Nothing here yet."]:this.third?i[2]?(i[2].read=!0,s=i[2].content):s=["Nothing here yet."]:this.fourth&&(i[3]?(i[3].read=!0,s=i[3].content):s=["Nothing here yet."]),s.forEach((t,i)=>{let s=45*(i+1)+150;e.fillText(t,80,s)})}}class m{constructor(e){this.teller=new l,this.background=new Image,this.background.src="./images/background.png",this.filterImg=new Image,this.filterImg.src="./images/filter.png",this.tom=null,this.X=30,this.Y=400,this.iscreen=new c,this.objects={door:new n,paint:new o,writing:new h.a.Writing,shadow:new h.a.Shadow,bed:new h.a.Bed,inventory:new a,key:new w.a.Key,letter1:new w.a.Letter1,table:new h.a.Table,letter2:new w.a.Letter2,letter3:new w.a.Letter3,title:new h.a.Title,ending:new h.a.Ending},this.selectCount=0,this.intro=!1,this.over=!1}addTom(){return this.tom=new s,this.tom}play(e){if(window.rightPressed&&this.X<630&&window.gameOn?(window.items||this.tom.blockedr?(this.selectCount+=1,5===this.selectCount&&(this.selectCount=0,this.iscreen.moveRight())):this.X+=3,this.objects.inventory.items.length>=0&&(this.teller.phrase=["Nothing much here.."])):window.leftPressed&&this.X>-50&&window.gameOn&&(window.items||this.tom.blockedl?(this.selectCount+=1,5===this.selectCount&&(this.selectCount=0,this.iscreen.moveLeft())):this.X-=3,this.objects.inventory.items.length>=0&&(this.teller.phrase=["Nothing much here.."])),window.upPressed&&this.Y>250&&!this.tom.blockedu&&window.gameOn?(window.items||(this.Y-=3),this.objects.inventory.items.length>=0&&(this.teller.phrase=["Nothing much here.."])):window.downPressed&&this.Y<450&&!this.tom.blockedd&&window.gameOn&&(window.items||(this.Y+=3),this.objects.inventory.items.length>=0&&(this.teller.phrase=["Nothing much here.."])),this.X>440&&this.X<460&&this.Y<300&&this.objects.paint.dropPaint(),e.clearRect(0,0,800,600),e.fillRect(0,0,800,600),e.drawImage(this.background,0,0,800,600),this.objects.door.draw(e),this.objects.paint.draw(e),this.objects.table.draw(e),this.objects.paint.dropped&&(this.objects.key.draw(e),this.objects.writing.write()),this.objects.writing.draw(e),20===this.tom.count&&window.gameOn&&(this.objects.table.surprise(),this.tom.count+=1),35===this.tom.count&&window.gameOn&&(this.objects.shadow.gone(),this.objects.letter3.discover(),this.tom.count+=1),this.objects.table.surprised&&this.objects.letter2.draw(e),this.objects.letter3.draw(e),this.tom.checkCollision({x:this.X,y:this.Y}),this.X<150&&this.Y<320?(this.tom.draw({ctx:e,x:this.X,y:this.Y}),this.objects.bed.opened&&this.objects.letter1.draw(e),this.objects.bed.draw(e)):(this.objects.bed.draw(e),this.objects.bed.opened&&this.objects.letter1.draw(e),this.tom.draw({ctx:e,x:this.X,y:this.Y})),this.X>275&&this.objects.shadow.draw(e),e.drawImage(this.filterImg,this.X-700,this.Y-710,1600,1600),window.gameOn&&!this.over?this.objects.inventory.draw(e):this.objects.title.draw(e),window.telling){let t=this.objects,i={x:this.X,y:this.Y};this.teller.talk({ctx:e,pos:i,interactables:t})}if(window.items){let t=this.objects.inventory;this.iscreen.open({ctx:e,inventory:t})}this.over&&this.objects.ending.draw(e)}add(e){e instanceof paint&&this.paintings.push(e)}}var g=i(2),u=i.n(g);const p=document.getElementById("game-canvas");let f;if(p.width=800,p.height=600,window.gameOn){let e=p.getContext("2d");(f=new m(e)).intro=!0,new u.a(f,e).start()}else{let e=p.getContext("2d");f=new m(e),new u.a(f,e).start()}document.addEventListener("keydown",function(e){39!==e.keyCode||window.telling?37!==e.keyCode||window.telling||(e.preventDefault(),window.leftPressed=!0,window.walkingLeft=!0):(e.preventDefault(),window.rightPressed=!0,window.walkingRight=!0);38!==e.keyCode||window.telling?40!==e.keyCode||window.telling||(e.preventDefault(),window.downPressed=!0,window.walkingLeft=!0):(e.preventDefault(),window.upPressed=!0,window.walkingRight=!0);77===e.keyCode&&(e.preventDefault(),y.paused?y.play():y.pause());32!==e.keyCode||!window.gameOn||f.over||window.items||(e.preventDefault(),window.telling?window.telling=!1:window.telling&&f.intro?(f.intro=!1,window.telling=!1):window.gameEnding?(f.over=!0,window.telling=!1):window.telling=!0);73===e.keyCode&&window.gameOn&&(e.preventDefault(),window.items?window.items=!1:(window.telling=!1,window.items=!0));32===e.keyCode&&(e.preventDefault(),window.gameOn||(f.intro=!0,window.telling=!0,window.gameOn=!0,y.play()))},!1),document.addEventListener("keyup",function(e){39===e.keyCode?(window.rightPressed=!1,window.walkingRight=!1):37===e.keyCode&&(window.leftPressed=!1,window.walkingLeft=!1);38===e.keyCode?(window.upPressed=!1,window.walkingRight=!1):40===e.keyCode&&(window.downPressed=!1,window.walkingLeft=!1)},!1);const y=new Audio("./audio/escape.mp3");y.addEventListener("ended",function(){this.currentTime=0,this.play()},!1),y.play(),window.dropsound=new Audio("./audio/drop.mp3"),window.bedsound=new Audio("./audio/bed.mp3"),window.keysound=new Audio("./audio/key.mp3"),window.skullsound=new Audio("./audio/skull.mp3"),window.coinsound=new Audio("./audio/change.mp3"),window.steps=new Audio("./audio/steps.mp3"),window.telling=!1,window.items=!1,window.gameOn=!1,window.gameOver=!1,window.frames=0}]);
//# sourceMappingURL=bundle.js.map